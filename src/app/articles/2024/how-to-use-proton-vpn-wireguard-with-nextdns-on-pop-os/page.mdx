import { ArticleLayout } from "../../../../components/ArticleLayout";

export const article = {
  author: "Anton Å½danov",
  date: "2024-08-23T14:21:20.345Z",
  title:
    "How to Use Proton VPN WireGuard with NextDNS on Pop!_OS",
  description:
    "If you're using Pop!_OS and want to combine the security of Proton VPN with the advanced DNS features of NextDNS, here's a quick guide to set it up.",
};

export const metadata = {
  title: article.title,
  description: article.description,
};

export default function MDXPage({ children }) {
  return <ArticleLayout article={article}>{children}</ArticleLayout>;
}

If you're using Pop!_OS and want to combine the security of Proton VPN with the advanced DNS features of NextDNS, here's a quick guide to set it up.

1. Download your Proton VPN WireGuard config from the [Proton VPN WireGuard configuration](https://account.proton.me/u/0/vpn/WireGuard).
2. Get your NextDNS configuration ID and Endpoints from the [NextDNS dashboard](https://my.nextdns.io).
4. In the downloaded wireguard config remove the `DNS =` line from the `[Interface]` section.
5. Add a `PostUp` command to configure NextDNS using `resolvectl` and your NextDNS ID and Endpoints: `PostUp = resolvectl dns %i 172.16.80.142#pop-os-1234a5.dns.nextdns.io 2001:db8:a0b:12f0::1#pop-os-1234a5.dns.nextdns.io 172.16.83.142#pop-os-1234a5.dns.nextdns.io 2001:db8:a0b:12f1::1#pop-os-1234a5.dns.nextdns.io; resolvectl dnsovertls %i yes; resolvectl domain %i ~.`
6. Save the modified config file.

Here's how it might look:
```text
[Interface]
# Key for GB#1
# Bouncing = 0
# NetShield = 0
# Moderate NAT = off
# NAT-PMP (Port Forwarding) = off
# VPN Accelerator = on
PrivateKey = <PrivateKey>
Address = <Address>
PostUp = resolvectl dns %i 172.16.80.142#pop-os-1234a5.dns.nextdns.io 2001:db8:a0b:12f0::1#pop-os-1234a5.dns.nextdns.io 172.16.83.142#pop-os-1234a5.dns.nextdns.io 2001:db8:a0b:12f1::1#pop-os-1234a5.dns.nextdns.io; resolvectl dnsovertls %i yes; resolvectl domain %i ~.

[Peer]
# GB#1
PublicKey = <PublicKey>
AllowedIPs = 0.0.0.0/0
Endpoint = <Address>
```

**NB: I removed personal values and used random ones for IPv4, IPv6 and NextDNS ID. Make sure to use your own.**

This setup leverages `systemd-resolved`, which Pop!_OS uses by default. The `PostUp` command configures NextDNS when the WireGuard connection is established.

Now you can enjoy the combined benefits of Proton VPN's security and NextDNS's advanced filtering and analytics!

---

If you have any further questions or need help with this setup, feel free to send me an email. I'm always happy to help!
